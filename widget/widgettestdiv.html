<!DOCTYPE html>
<html lang="en">
<head>
  <!-- 		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="CorporateTool.Net"/>
  <meta name="Keywords" content="widget html aria WCAG"/>
  <meta name="Description" content="A test web page for a widget implementations using divs"/>
  <meta name="robots" content="all"/>
  <meta name="docref" content="react widget test - widgettestdiv.html"/>
  <title aria-label="Widget Test Div - CorporateTool dot Net">Widget Test Div Page -
    CorporateTool.Net</title>
  <link type="image/vnd.microsoft.icon" rel="shortcut icon" href="/resources/images/favicon.ico"/>
  <link type="image/vnd.microsoft.icon" rel="icon" href="/resources/images/favicon.ico"/>
  <!--  <link type="text/css" rel="stylesheet" href="resources/css/main.css"/>-->
  <!--	<link type="text/css" rel="stylesheet" href="resources/css/secondary.css" /> -->
  <!-- BEGIN Widget Div Test -->
  <script type="text/javascript">
    console.log("Widget Div Test - In Page - Start Init");
    window.addEventListener('load', (event) => {
      console.log("Widget Test Div - In Page - On Load - Start: event", event);
      (function (d, a, b, f, e) {
        console.log("Widget Test - In Page - On Load - Enclosed - Start");
        d[e] = d[e] || [];
        d[e].push({analytics1: "a1", analyticsProperties: {aP1: "property1", aP2: "property2"}});
        console.log('window:', d, d.analyticsObj);
        const widgetWrapper = document.getElementById('widgetTestDiv');
        console.log('widgetWrapper', widgetWrapper);
        const chewyCenter = document.getElementById('chewycenter');
        console.log('chewyCenter', chewyCenter);
        const widgetData = (widgetWrapper && widgetWrapper.dataset) || {};
        const modelCode = (widgetData && widgetData.modelCode) ? widgetData.modelCode : 0;
        const postalCode = (widgetData && widgetData.postalCode) ? widgetData.postalCode : '';
        const dealerCode = (widgetData && widgetData.dealerCode) ? widgetData.dealerCode : '';
        console.log('widgetWrapper.dataset', widgetWrapper.dataset);
        console.log('widgetData', widgetData);
        console.log('modelCode', modelCode);
        console.log('postalCode', postalCode);
        console.log('dealerCode', dealerCode);

        let c = a.createElement(b);
        c.src = f;
        c.async = !0;
        c.onload = c.onreadystatechange = function () {
          // anayltics / onload code
          var a = this.readyState, c = d[e];
          if (!a || "complete" === a || "loaded" === a) try {
            console.log('loaded - :', e, c);
            // analytics or loaded code here as needed
          } catch (g) {
            console.log('loading error:', g);
          }
        };
        console.log('script tag:', c);
        a = a.getElementsByTagName(b)[0];
        b = a.parentNode;
        // console.log('script tag:', c);
        b.insertBefore(c, a)
        console.log("Widget Test - In Page - On Load - Enclosed - End");
      })(window, document, "script", "http://10.0.0.20:1337/widget/js/widgettestdiv.js", "analyticsObj");
      // })(window, document, "iframe", "http://10.0.0.20:1337/sandbox/js/widgetiframetest.js", "analyticsObj");
      console.log("Widget Test Div - In Page - On Load - End");
    });

    console.log("Widget Div Test - In Page - End Init");
  </script>
  <!-- END Widget Div Test -->

  <script>
    // let hc = hc || {};
    // hc.vva = hc.vva || {};
    // hc.vva.dealerCode = "1337;"

  </script>
  <style>
  </style>
</head>
<body>
<div id="container">
  <div id="chewycenter">
    <h1>CT.Net Widget Div Test Page</h1>
    <a href="../index.html" id="topAnchor">Back to Index</a>

    <div id="widgetTestDiv" data-model-code="1337" data-postal-code="A1A2B2" data-dealer-id="g33k">
    </div>
    <!--    <script type="text/javascript" src="http://10.0.0.20:1337/sandbox/js/widgettest.js"></script> --->
    <!--    <link href="https://giologist.github.io/article-react-reddit-widget/index.css" rel="stylesheet" />-->
<!--    <script src="https://giologist.github.io/article-react-reddit-widget/index.js"></script>-->
<!--    <div class="reddit_widget" data-subreddit="SUBREDDIT_HERE"></div>-->

    <!--

<script src="https://s.yimg.com/wi/ytc.js" async=""></script>

(function(d,a,b,f,e){d[e]=d[e]||[];d[e].push({projectId:"10000",properties:{pixelId:"10019725"}});var c=a.createElement(b);c.src=f;c.async=!0;c.onload=c.onreadystatechange=function(){var a=this.readyState,c=d[e];if(!a||"complete"==a||"loaded"==a)try{var b=YAHOO.ywa.I13N.fireBeacon;d[e]=[];d[e].push=function(a){b([a])};b(c)}catch(g){}};a=a.getElementsByTagName(b)[0];b=a.parentNode;b.insertBefore(c,a)})(window,document,"script","https://s.yimg.com/wi/ytc.js","dotq");

    function loadError(oError) {
  throw new URIError(`The script ${oError.target.src} didn't load correctly.`);
}

function prefixScript(url, onloadFunction) {
  const newScript = document.createElement("script");
  newScript.onerror = loadError;
  if (onloadFunction) { newScript.onload = onloadFunction; }
  document.currentScript.parentNode.insertBefore(newScript, document.currentScript);
  newScript.src = url;
}
Copy to Clipboard
This next function, instead of prepending the new scripts immediately before the document.currentScript element, appends them as children of the <head> tag.

function loadError(oError) {
  throw new URIError(`The script ${oError.target.src} didn't load correctly.`);
}

function affixScriptToHead(url, onloadFunction) {
  const newScript = document.createElement("script");
  newScript.onerror = loadError;
  if (onloadFunction) { newScript.onload = onloadFunction; }
  document.head.appendChild(newScript);
  newScript.src = url;
}
Copy to Clipboard
Sample usage:

affixScriptToHead("myScript1.js");
affixScriptToHead("myScript2.js", () => { alert("The script \"myScript2.js\" has been correctly loaded."); });

    -->

    <div class="leftcontent left">
    </div>
    <div id="rightaction" class="right">
    </div>
    <br class="clear"/>
  </div>
  </div>
  <!--  <footer id="footer">
    Footer
  </footer>-->
</body>
<!--<script type="text/javascript" src="js/widgettest.js"></script>-->

</html>
